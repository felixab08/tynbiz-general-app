<div class="relative overflow-x-auto shadow-md px-5 md:px-10 2xl:px-30">

  <div class="mb-6 mt-2 flex justify-between">
    <div>
      <h1 class="text-2xl font-semibold">Pasarela de pago</h1>
      <p>
        las dueñas de las tiendas virtuales para pagar suscrpcion debe usar cualquier metodo de pago
      </p>
    </div>
    <div>
      <button data-modal-hide="default-modal" type="button"
        class="text-white bg-purple-700 ml-4 hover:bg-purple-900 focus:ring-4 focus:outline-none focus:ring-purple-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-800">
        Ver estadisticas
      </button>
    </div>
  </div>
  <div class="mb-6 mt-2">
    <h1 class="text-2xl font-semibold">Metodos de pago</h1>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-2 m-6">
      @for (item of listMethods; track item.id) {
      <div class="flex flex-col h-full">
        <div class="relative">
          <!-- Card con imagen o texto centrado -->
          <div
            class="h-36 w-full bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700 overflow-hidden flex items-center justify-center">
            @if (item.img == null) {
            <h5 class="text-base font-bold text-center text-gray-900 dark:text-white">
              {{ item.title }}
            </h5>
            } @else {
            <img [src]="item.img" alt="" class="absolute inset-0 h-full w-full object-cover rounded-lg" />
            }
          </div>

          <!-- Botón tres puntos arriba derecha -->
          <button (click)="toggleDropdown(item)" class="absolute top-2 right-2 p-1 rounded ">
            <svg class="w-4 h-4 text-gray-500 dark:text-gray-400 hover:text-gray-800" xmlns="http://www.w3.org/2000/svg"
              fill="currentColor" viewBox="0 0 4 15">
              <path
                d="M3.5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 6.041a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 5.959a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z" />
            </svg>
          </button>

          <!-- Dropdown con opciones -->
          <div *ngIf="openDropdownIndex === item.id"
            class="absolute top-6 right-2 mt-2 w-40 bg-white border border-purple-400 rounded-md shadow-lg z-50 dark:bg-purple-700">
            <ul class="text-sm text-gray-700 dark:text-gray-200">
              @if (item.estate == 'inactivo') {<li (click)="openModalWar('activar')"
                class="px-4 py-2 hover:bg-purple-300 dark:hover:bg-purple-600 cursor-pointer">Activar</li>}@else {<li
                (click)="openModalWar('desactivar')"
                class="px-4 py-2 hover:bg-purple-300 dark:hover:bg-purple-600 cursor-pointer">Desactivar</li>}
            </ul>
          </div>
        </div>
        <div class="mt-1">
          <span [ngClass]="{' text-green-600': item.estate === 'activo', ' text-red-600': item.estate === 'inactivo' }">
            {{item.estate}}
          </span>
        </div>
      </div>
      }
    </div>

  </div>
  <div class="mb-6 mt-2">
    <h1 class="text-2xl font-semibold">Pagos realizados por tiendas virtuales en suscripccion</h1>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-2 m-6">
      @for (item of listMethods; track item.id) {
      <tyn-simple-card [isCardValue]="item" [tipeCant]="'cantidad'" />
      }


    </div>

  </div>
</div>

<tyn-warning-modal [visible]="modalVisible" [itemName]="selectedMethod?.method"
  [actionLabel]="currentAction === 'activar' ? 'Activar' : 'Desactivar'" [actionType]="currentAction"
  (confirm)="confirmAction()" (cancel)="closeModalWar()">
</tyn-warning-modal>
